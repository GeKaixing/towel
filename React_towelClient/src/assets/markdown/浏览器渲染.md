### 浏览器渲染域原理
html字符串--->渲染--->像素信息
当浏览器输入地址发生了
### 网络
初始链接阶段
* DNS查找域名对应的ip地址
* tcp 三次握手  四次挥手
SSL加密协议秘钥匙
* 进入SSL加密协议协商握手
服务器准备内容
* 服务器应用准备内容
下载内容阶段
* 客户端下载内容
* 拿到HTML会产生渲染任务，加入消息队列，然后渲染主线程执行渲染HTML为像素点
### 渲染
HTML字符串
* 解析HTML/parser
会产生两根树DOM树和COM树，这两个**对象**，DOM（c++）对象，外面js包了一层。COM的根样式表其中有内联样式表，浏览器默认样式表，link样式表，style样式表。对象结果都是操作的。
为了提高解析效率，浏览器会启动一个预解析线程率先下载和解析css，所以css解析不会堵塞渲染主线程。当解析HTMl中遇到js会暂停一切行为，等待下载执行完毕才能继续。预解析线程可以分担一点下载js的任务。这是因为，js的代码会改动DOM的代码。第一步会得到DOM树和CCSOM树，并输出给下一个阶段
* 样式计算
计算DOM树和COM树，输出有最终样式的DOM树。
  + css属性值的计算过程
  + 视觉格式化模式
* 布局
根据最种样式计算位置，宽高，几何信息
**包含块**，几何信息，伪元素，内能必须在行盒中，行盒盒块盒不能相连
* 分层
根堆叠上下文有关的属性会影响分层，z-index，透明度，动画。只更新那一层的文档
* 绘制
生成绘制指令
渲染主线程的工作到此为止，剩余步骤交给其他线程完成
* 分块
分块会将每一层分为多个小的区域，合成线程将完成分块的工作是交个线程池中多个线程同时进行的
* 光栅化
光栅化是将每个块变成位图，优先处理靠近视口的块。合成线程会把光栅化交给GPU线程做。光栅化在gpu进程执行。此过程会用到Gpu加速，然后将生成的位图交给合成线程
* 画
合成线程根据位图生成指引信息，将指引信息交给GPU进程，GPU进程产生系统调用，提交给GPU硬件，完成最终的屏幕成像。
### 渲染流程
渲染主形成parser--->compedetstyle--->layout--->layer--->paint合成线程--->tilting--->raster--->draw
### 回流和重绘和transform
* 回流一定会重绘，回流的开销打，几何信息的触发浏览器的回流将重新计算样式
* 重绘在paint步骤
* transform在draw执行，并且在合成线程，并不会堵塞渲染主形成



